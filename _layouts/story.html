---
layout: default
---
<main class="container page-story">
  <article class="story-detail">
    <header class="story-detail__header">
      <div class="story-header">
        {% include notation-badge.html idea=page.idea_number story=page.story_number size="lg" %}
        <span class="status-indicator status-indicator--{{ page.status }}">{{ page.status | replace: "-", " " | upcase }}</span>
        <span class="priority-indicator priority-indicator--{{ page.priority }}">{{ page.priority | upcase }} PRIORITY</span>
      </div>
      
      <h1 class="page-title">{{ page.title }}</h1>
      
      <div class="story-detail__meta">
        {%- if page.assigned_sprint -%}
          <span class="story-detail__sprint">Sprint: <a href="{{ '/sprint/' | append: page.assigned_sprint | append: '/' | relative_url }}">{% include notation-badge.html sprint=page.assigned_sprint size="sm" %}</a></span>
        {%- else -%}
          <span class="story-detail__sprint story-detail__sprint--backlog">Backlog</span>
        {%- endif -%}
        <time class="story-detail__date" datetime="{{ page.created }}">Created: {{ page.created | date: "%B %d, %Y" }}</time>
      </div>
      
      {%- assign parent_idea = site.ideas | where: "idea_number", page.idea_number | first -%}
      {%- if parent_idea -%}
        <p class="story-detail__parent">
          Part of: <a href="{{ parent_idea.url | relative_url }}">{% include notation-badge.html idea=parent_idea.idea_number %} {{ parent_idea.title }}</a>
        </p>
      {%- endif -%}
    </header>

    {%- if page.description -%}
      <div class="story-detail__description">
        <h2 class="section-title">DESCRIPTION</h2>
        <p>{{ page.description }}</p>
      </div>
    {%- endif -%}
    
    <div class="story-content">
      {{ content }}
    </div>

    {%- include helpers/updates-for-story.html idea_number=page.idea_number story_number=page.story_number -%}
    {%- if story_updates.size > 0 -%}
      <section class="content-section">
        <header class="section-header">
          <h2 class="section-title">UPDATES</h2>
          <span class="section-count">{{ story_updates.size }} total</span>
        </header>
        <ul class="update-timeline">
          {%- for update in story_updates -%}
            <li class="update-timeline__item">
              <span class="update-timeline__notation">{% include notation-badge.html sprint=update.sprint_id idea=update.idea_number story=update.story_number size="sm" %}</span>
              <time class="update-timeline__date" datetime="{{ update.date }}">{{ update.date | date: "%b %d, %Y" }}</time>
              <span class="update-timeline__type">{{ update.type }}</span>
              <a href="{{ update.url | relative_url }}" class="update-timeline__link">View update</a>
            </li>
          {%- endfor -%}
        </ul>
      </section>
    {%- endif -%}
  </article>
</main>


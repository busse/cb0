<!--
  Breadcrumbs
  Shows hierarchical path using notation system
  
  Parameters:
    - include.idea (optional): idea object
    - include.story (optional): story object  
    - include.sprint (optional): sprint object
-->

<nav class="breadcrumbs" aria-label="Breadcrumb">
  <ol class="breadcrumbs__list">
    
    <!-- Home is always first -->
    <li class="breadcrumbs__item">
      <a href="{{ '/' | relative_url }}" class="breadcrumbs__link">
        {% include notation-badge.html idea=0 size="sm" %}
      </a>
    </li>
    
    <!-- Ideas level -->
    {%- if include.idea or page.layout == 'idea' or page.layout == 'story' -%}
      <li class="breadcrumbs__item">
        <span class="breadcrumbs__separator" aria-hidden="true">→</span>
        <a href="{{ '/ideas/' | relative_url }}" class="breadcrumbs__link">IDEAS</a>
      </li>
    {%- endif -%}
    
    <!-- Figures level -->
    {%- if include.figure or page.layout == 'figure' -%}
      <li class="breadcrumbs__item">
        <span class="breadcrumbs__separator" aria-hidden="true">→</span>
        <a href="{{ '/figures/' | relative_url }}" class="breadcrumbs__link">FIGURES</a>
      </li>
    {%- endif -%}
    
    <!-- Specific Idea -->
    {%- if include.idea -%}
      <li class="breadcrumbs__item">
        <span class="breadcrumbs__separator" aria-hidden="true">→</span>
        <a href="{{ include.idea.url | relative_url }}" class="breadcrumbs__link">
          {% include notation-badge.html idea=include.idea.idea_number size="sm" %}
        </a>
      </li>
    {%- elsif page.layout == 'idea' -%}
      <li class="breadcrumbs__item" aria-current="page">
        <span class="breadcrumbs__separator" aria-hidden="true">→</span>
        {% include notation-badge.html idea=page.idea_number size="sm" %}
      </li>
    {%- endif -%}
    
    <!-- Story level -->
    {%- if include.story or page.layout == 'story' -%}
      {%- assign story = include.story | default: page -%}
      {%- assign primary_story_idea = story.related_ideas | first -%}
      <li class="breadcrumbs__item" aria-current="page">
        <span class="breadcrumbs__separator" aria-hidden="true">→</span>
        {% include notation-badge.html idea=primary_story_idea story=story.story_number size="sm" %}
      </li>
    {%- endif -%}
    
    <!-- Specific Figure -->
    {%- if include.figure -%}
      <li class="breadcrumbs__item">
        <span class="breadcrumbs__separator" aria-hidden="true">→</span>
        <a href="{{ include.figure.url | relative_url }}" class="breadcrumbs__link">
          {% include notation-badge.html figure=include.figure.figure_number size="sm" %}
        </a>
      </li>
    {%- elsif page.layout == 'figure' -%}
      <li class="breadcrumbs__item" aria-current="page">
        <span class="breadcrumbs__separator" aria-hidden="true">→</span>
        {% include notation-badge.html figure=page.figure_number size="sm" %}
      </li>
    {%- endif -%}
    
    <!-- Sprint context (if viewing from sprint) -->
    {%- if include.sprint -%}
      <li class="breadcrumbs__item">
        <span class="breadcrumbs__separator" aria-hidden="true">→</span>
        <a href="{{ include.sprint.url | relative_url }}" class="breadcrumbs__link">
          {% include notation-badge.html sprint=include.sprint.sprint_id size="sm" %}
        </a>
      </li>
    {%- endif -%}
    
  </ol>
</nav>



